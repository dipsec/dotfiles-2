#!/bin/bash

# @note: this backups would be a lot safer if I could confirm the UUID of the
# drives on which the backup dirs lived

# configs
TC2='/media/truecrypt2'
TC3='/media/truecrypt3'
LOGPATH='/var/log/disk-backup/disk-backup.log'

# back-ups
echo "Backup created " `date` > $LOGPATH

# Back up to the internal drive
if [ -d "/media/truecrypt2" ]; then
  echo "Syncing to internal drive..."
  rsync -av --delete /home/chris "$TC2/fourside" >> $LOGPATH
  rsync -av --delete --exclude="lost+found" /media/truecrypt1 "$TC2/fourside" >> $LOGPATH
fi

# Back up to the external drive
if [ -d "/media/truecrypt3" ]; then
  echo "Syncing to external drive..."
  rsync -av --delete /home/chris "$TC3/fourside" >> $LOGPATH
  rsync -av --delete --exclude="lost+found" /media/truecrypt1 "$TC3/fourside" >> $LOGPATH
fi

# @todo: back-up critical files with tarsnap

# complete
echo "Backup complete."
